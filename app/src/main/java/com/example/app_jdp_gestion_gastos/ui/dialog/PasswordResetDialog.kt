package com.example.app_jdp_gestion_gastos.ui.dialogimport android.app.Dialogimport android.content.Contextimport android.os.Bundleimport androidx.core.content.ContextCompatimport androidx.fragment.app.DialogFragmentimport com.example.app_jdp_gestion_gastos.Rimport com.google.android.material.dialog.MaterialAlertDialogBuilderimport com.google.android.material.textfield.TextInputEditTextimport com.google.android.material.textfield.TextInputLayoutimport com.google.firebase.auth.FirebaseAuthclass PasswordResetDialog : DialogFragment() {    private lateinit var contexto: Context    private val auth = FirebaseAuth.getInstance()    override fun onAttach(context: Context) {        super.onAttach(context)        this.contexto = context    }    override fun onCreateDialog(savedInstanceState: Bundle?): Dialog {        // Creamos el EditText dentro de un TextInputLayout para estilo Material moderno        val emailInputLayout = TextInputLayout(contexto).apply {            setPadding(40, 0, 40, 0)        }        val emailEditText = TextInputEditText(contexto).apply {            hint = "Correo electrónico"            inputType = android.text.InputType.TYPE_TEXT_VARIATION_EMAIL_ADDRESS            isSingleLine = true        }        emailInputLayout.addView(emailEditText)        val dialog = MaterialAlertDialogBuilder(requireContext())            .setTitle("Recuperar contraseña")            .setMessage("Introduce tu correo electrónico para restablecer la contraseña:")            .setView(emailInputLayout)            .setPositiveButton("Enviar") { dialogInterface, _ ->                val email = emailEditText.text.toString().trim()                if (email.isNotEmpty()) {                    auth.sendPasswordResetEmail(email)                        .addOnCompleteListener { task ->                            if (task.isSuccessful) {                                androidx.appcompat.app.AlertDialog.Builder(contexto)                                    .setMessage("Correo de recuperación enviado")                                    .setPositiveButton("OK", null)                                    .show()                            } else {                                androidx.appcompat.app.AlertDialog.Builder(contexto)                                    .setMessage("Error: ${task.exception?.message}")                                    .setPositiveButton("OK", null)                                    .show()                            }                        }                } else {                    androidx.appcompat.app.AlertDialog.Builder(contexto)                        .setMessage("El correo no puede estar vacío")                        .setPositiveButton("OK", null)                        .show()                }                dialogInterface.dismiss()            }            .setNegativeButton("Cancelar") { dialogInterface, _ ->                dialogInterface.dismiss()            }            .setBackground(ContextCompat.getDrawable(requireContext(), R.drawable.dialog_background))            .create()        dialog.window?.attributes?.windowAnimations = R.style.DialogAnimation        return dialog    }}