package com.example.app_jdp_gestion_gastos.ui.dialogimport android.app.Dialogimport android.os.Bundleimport android.view.LayoutInflaterimport androidx.appcompat.app.AlertDialogimport androidx.fragment.app.DialogFragmentimport com.example.app_jdp_gestion_gastos.data.model.Groupimport com.example.app_jdp_gestion_gastos.databinding.DialogGroupDetailsBindingimport com.google.firebase.Timestampimport java.text.SimpleDateFormatimport java.util.Localeclass GroupDetailsDialog : DialogFragment() {    private var _binding: DialogGroupDetailsBinding? = null    private val binding get() = _binding!!    override fun onCreateDialog(savedInstanceState: Bundle?): Dialog {        _binding = DialogGroupDetailsBinding.inflate(LayoutInflater.from(context))        val group = arguments?.getSerializable("group") as? Group            ?: throw IllegalArgumentException("Group is required")        // Configurar la vista con los datos del grupo        binding.tvGroupName.text = group.name        binding.tvCreatedBy.text = "Creado por: ${group.createdBy}"        binding.tvMembers.text = "Miembros: ${group.members.joinToString(", ")}"        binding.tvCreatedAt.text = "Fecha de creaciÃ³n: ${formatTimestamp(group.createdAt)}"        binding.tvExpenses.text = "Gastos: ${group.expenses.joinToString(", ")}"        return AlertDialog.Builder(requireContext())            .setTitle("Detalles del Grupo")            .setView(binding.root)            .setPositiveButton("Cerrar") { _, _ -> dismiss() }            .create()    }    override fun onDestroyView() {        super.onDestroyView()        _binding = null    }    companion object {        fun newInstance(group: Group): GroupDetailsDialog {            val args = Bundle().apply {                putSerializable("group", group)            }            return GroupDetailsDialog().apply {                arguments = args            }        }    }    private fun formatTimestamp(timestamp: Timestamp?): String {        return timestamp?.toDate()?.let {            val sdf = SimpleDateFormat("dd/MM/yyyy HH:mm", Locale.getDefault())            sdf.format(it)        } ?: "Fecha no disponible"    }}