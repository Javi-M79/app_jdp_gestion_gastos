package com.example.app_jdp_gestion_gastos.ui.viewmodelimport androidx.lifecycle.LiveDataimport androidx.lifecycle.MutableLiveDataimport androidx.lifecycle.ViewModelimport androidx.lifecycle.viewModelScopeimport com.example.app_jdp_gestion_gastos.data.model.Expenseimport com.example.app_jdp_gestion_gastos.data.model.Incomeimport com.example.app_jdp_gestion_gastos.data.repository.StatsRepositoryimport kotlinx.coroutines.launchclass StatsViewModel(private val statsRepository: StatsRepository) : ViewModel() {    private val _totalGastos = MutableLiveData<Double>()    val totalGastos: LiveData<Double> get() = _totalGastos    private val _totalIngresos = MutableLiveData<Double>()    val totalIngresos: LiveData<Double> get() = _totalIngresos    private val _promedioGastos = MutableLiveData<Double>()    val promedioGastos: LiveData<Double> get() = _promedioGastos    private val _numTransaccionesIngresos = MutableLiveData<Int>()    val numTransaccionesIngresos: LiveData<Int> get() = _numTransaccionesIngresos    private val _numTransaccionesGastos = MutableLiveData<Int>()    val numTransaccionesGastos: LiveData<Int> get() = _numTransaccionesGastos    fun loadStats() {        viewModelScope.launch {            // Obtener los gastos e ingresos desde el repositorio            val gastos = statsRepository.getExpenses()            val ingresos = statsRepository.getIncomes()            // Calcular los totales            val totalGastosAmount = gastos.sumOf { it.amount }            val totalIngresosAmount = ingresos.sumOf { it.amount }            // Calcular el promedio de los gastos            val promedioGastosAmount = if (gastos.isNotEmpty()) {                totalGastosAmount / gastos.size            } else {                0.0            }            // Asignar valores a LiveData            _totalGastos.postValue(totalGastosAmount)            _totalIngresos.postValue(totalIngresosAmount)            _promedioGastos.postValue(promedioGastosAmount)            // NÃºmero de transacciones por tipo            _numTransaccionesIngresos.postValue(ingresos.size)            _numTransaccionesGastos.postValue(gastos.size)        }    }}